<?php

/*	+----------------------------------------------------------------------------------------------------------------------+
	|-----| Includes |-----------------------------------------------------------------------------------------|
	+----------------------------------------------------------------------------------------------------------------------+	*/

		require_once 'config.php';
		require_once 'XML/Query2XML.php';
		require_once 'MDB2.php';
		require_once 'Numbers/Words.php';
		
/*	+----------------------------------------------------------------------------------------------------------------------+
	+----------------------------------------------------------------------------------------------------------------------+	*/




/*	+----------------------------------------------------------------------------------------------------------------------+
	|-----| Functions |----------------------------------------------------------------------------------------------------|
	+----------------------------------------------------------------------------------------------------------------------+	*/
	
		function getXML($pSQL,$pHeader=true,$pArray="null"){
			global $db_host, $db_user, $db_pass, $db_database, $db_settings;
			try {
				$q2x = XML_Query2XML::factory(MDB2::factory("mysql://$db_user:$db_pass@$db_host/$db_database"));
				if(is_array($pArray)){
					$xml = $q2x->getXML($pSQL,$pArray);
				}
				else{
					$xml = $q2x->getFlatXML($pSQL);
				}
				if($pHeader){
					header('Content-Type: text/xml');
					$xml->formatOutput = $pHeader;
				}
				return $xml->saveXML();
			} catch (Exception $e) {
				return $e->getMessage();
			}
		}
		
		
		function number2Word($no){
			$word	=	'';
			if($no > 0){
				$nsplit		=	split('\.', $no);
				
				// Split Rupees
				$rupee		=	Numbers_Words::toWords($nsplit[0]);
				$word		.=	@ucwords(@preg_replace('/[-]/', ' ', $rupee));
				
				// Split Paise
				if(!is_null($nsplit[1]) && $nsplit[1] > 0){
					$paise	=	Numbers_Words::toWords($nsplit[1]);
					$word	.=	' And '.@ucwords(@preg_replace('/[-]/', ' ', $paise)).' Paise';
				}
			}
			
			return $word;
		}

/*	+----------------------------------------------------------------------------------------------------------------------+
	|-----| Functions |----------------------------------------------------------------------------------------------------|
	+----------------------------------------------------------------------------------------------------------------------+	*/
	
?>